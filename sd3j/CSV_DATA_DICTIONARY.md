# SD3-J CSV データ辞書

## 概要

このドキュメントでは、SD3-J（日本語版 Short Dark Triad）アンケートで収集されたCSVデータの各変数を説明します。

**ファイル構成:**
- **総列数**: 81列
- **総行数**: 6行（各行は試験段階を表す）
- **質問項目**: 9個
- **ドメイン**: 3領域（M: マキャベリズム、N: ナルシシズム、P: 心理的サイコパシー）

---

## I. メタデータ列（16列）

### A. 試験進行情報

| 列名 | データ型 | 説明 | 例 |
|------|---------|------|-----|
| `trial_type` | テキスト | 試行タイプ。どのプラグインが使用されたか | `"html-button-response"`, `"survey"`, `"survey-likert"` |
| `trial_index` | 整数 | 試行内でのインデックス。0から始まる順序番号 | `0`, `1`, `2`, `3`, `4`, `5` |
| `rt` | 整数 | Response Time（応答時間）。ミリ秒単位 | `2921`, `4843`, `3234` |
| `time_elapsed` | 整数 | 実験開始からの経過時間。ミリ秒単位 | `2923`, `7820`, `11057` |
| `page_number` | 整数 | アンケートのページ番号。Likert尺度のページ識別子 | `1`, `2`, `3` |
| `page_items` | テキスト | 各ページに含まれる質問項目。カンマ区切り形式で格納 | `"9,17,21,15,7,22,1,6,5"` |

### B. 被験者情報

| 列名 | データ型 | 説明 | 例 |
|------|---------|------|-----|
| `subject_demographics_age` | 整数 | 被験者の年齢 | `35` |
| `subject_demographics_gender` | テキスト | 被験者の性別 | `"男性"`, `"女性"`, `"その他"`, `"未回答"` |

**重要:** これらのフィールドは被験者データの「グローバルプロパティ」として記録されます。つまり、デモグラフィック情報入力後のすべての試行に同じ値が自動的に追加されます（行1～6すべてに同じ値）。

### C. システム情報

| 列名 | データ型 | 説明 | 例 |
|------|---------|------|-----|
| `start_timestamp` | 整数 | 試験開始のUnixタイムスタンプ。ミリ秒単位 | `1761633061360` |
| `start_time_jst` | テキスト | 試験開始時刻（日本標準時）。YYYY/MM/DD HH:MM:SS形式 | `"2025/10/28 15:31:01"` |
| `browser` | テキスト | 使用ブラウザ | `"Chrome"`, `"Safari"`, `"Firefox"` |
| `os` | テキスト | 使用OS | `"macOS"`, `"Windows"`, `"iOS"` |
| `user_agent` | テキスト | ユーザーエージェント文字列。ブラウザとOSの詳細情報 | `"Mozilla/5.0 (Macintosh; ..."` |
| `plugin_version` | テキスト | 使用したjsPsychプラグインのバージョン | `"2.1.0"`, `"3.0.0"` |
| `question_order` | テキスト | 質問項目の呈示順序。JSONリスト形式 | `"[0,1,2,3,4,5,6,7,8]"` |

---

## II. 試行の種類（Trial Types）

### 試行構成

| trial_index | trial_type | 説明 | ページ |
|-------------|-----------|------|--------|
| 0 | `html-button-response` | イントロ画面（説明文と開始ボタン） | - |
| 1 | `survey` | デモグラフィック情報入力（年齢、性別） | - |
| 2 | `survey-likert` | Likert尺度 ページ1（質問1-9） | 1 |
| 3 | `survey-likert` | Likert尺度 ページ2（質問10-18） | 2 |
| 4 | `survey-likert` | Likert尺度 ページ3（質問19-27） | 3 |
| 5 | `html-button-response` | 結果表示画面（テーブル、レーダーチャート） | - |

---

## III. 質問データ列（63列）

### 構造

各質問項目（M1-M3, N1-N3, P1-P9）に対して、以下3種類の列が存在します：
- `{SCALE}{N}_raw`: ユーザーの生回答（Likert尺度）
- `{SCALE}{N}_scored`: スコアリング後の値（逆転処理済み）
- `{SCALE}{N}_item_number`: 項目番号

### 詳細説明

#### {SCALE}{N}_raw（生回答）

| 列名パターン | データ型 | 範囲 | 説明 |
|-------------|---------|------|------|
| `M{1-3}_raw`, `N{1-5}_raw`, `P{1-9}_raw` | 整数 | 1-5 | ユーザーが選択したLikert尺度の値 |

**Likert尺度:**
- `1` = 全くあてはまらない
- `2` = あてはまらない
- `3` = どちらかともいえない
- `4` = あてはまる
- `5` = とてもよくあてはまる

**例:**
```
M1_raw = 1    → ユーザーは「全くあてはまらない」を選択
P5_raw = 5    → ユーザーは「とてもよくあてはまる」を選択
```

#### {SCALE}{N}_scored（スコアリング後）

| 列名パターン | データ型 | 範囲 | 説明 |
|-------------|---------|------|------|
| `M{1-3}_scored`, `N{1-5}_scored`, `P{1-9}_scored` | 整数 | 1-5 | 逆転処理済みのスコア値 |

**スコアリングルール:**
- **通常項目**: `{SCALE}{N}_scored = {SCALE}{N}_raw`
- **逆転項目**: `{SCALE}{N}_scored = 6 - {SCALE}{N}_raw`

**SD3-Jの逆転項目:**
- **M領域**: M1, M2 が逆転項目
- **N領域**: N4, N5 が逆転項目  
- **P領域**: P4, P8 が逆転項目

**例:**
```
通常項目 (M3):
  M3_raw = 5
  M3_scored = 5  （変化なし）

逆転項目 (M1):
  M1_raw = 2
  M1_scored = 6 - 2 = 4  （逆転処理済み）
```

#### {SCALE}{N}_item_number（項目番号）

| 列名パターン | データ型 | 値 | 説明 |
|-------------|---------|-----|------|
| `M{1-3}_item_number`, `N{1-5}_item_number`, `P{1-9}_item_number` | 整数 | 1-27 | SD3-Jにおける項目番号 |

**用途:** スケール計算時に項目を特定するために使用

---

## IV. ドメイン構造

SD3-Jは3つのダークトライアド領域（Dark Triad）で構成されています。

### ドメイン一覧

| 記号 | 日本語名 | 英語名 | 項目数 | 簡潔説明 |
|------|---------|--------|--------|---------|
| **M** | マキャベリズム | Machiavellianism | 9 | 操作性、欺瞞、戦略的行動 |
| **N** | ナルシシズム | Narcissism | 9 | 傲慢性、誇大性、賞賛欲求 |
| **P** | 心理的サイコパシー | Psychopathy | 9 | 共感欠如、反社会性、無責任性 |

### ドメイン別項目配置

#### M領域（マキャベリズム）

特性: 他者を操作・欺くことによる利益追求

| 項目 | 質問内容 | 逆転 | 列 |
|------|---------|------|-----|
| 1 | 私は自分の野心を隠すのが得意である | ✓ | M1 |
| 2 | 私は他の人をだまそうとしたことがあります | ✓ | M2 |
| 3 | 私は人を操作することが得意です | - | M3 |
| ... | ... | ... | ... |

#### N領域（ナルシシズム）

特性: 過度な自己像、他者への共感欠如

| 項目 | 質問内容 | 逆転 | 列 |
|------|---------|------|-----|
| 1 | 私は自分に非常に満足しています | - | N1 |
| 2 | 私は特別な人間だと思います | - | N2 |
| 3 | 私は他の人よりも優れていると思います | - | N3 |
| 4 | 私は他の人の気持ちについて考えることが少ないです | ✓ | N4 |
| 5 | 私は常に注目されたいと思っています | ✓ | N5 |

#### P領域（心理的サイコパシー）

特性: 衝動性、反社会的行動、共感性の欠如

| 項目 | 質問内容 | 逆転 | 列 |
|------|---------|------|-----|
| 1 | 私は法律を守ろうとしていません | - | P1 |
| 2 | 私は他の人が傷つくのを見ても動揺しません | - | P2 |
| ... | ... | ... | ... |
| 4 | 私は社会的責任を感じません | ✓ | P4 |
| ... | ... | ... | ... |
| 8 | 私は長期的な計画を立てるのが得意です | ✓ | P8 |
| 9 | 私は衝動的です | - | P9 |

---

## V. スコアリング計算手順

### 1. スケールスコアの計算

各スケール（M, N, P）は複数の項目で構成されています。

```
スケールスコア = (項目1_scored + 項目2_scored + ... + 項目N_scored) / 項目数

例（マキャベリズム）:
M_score = (M1_scored + M2_scored + M3_scored + M4_scored + M5_scored + M6_scored + M7_scored + M8_scored + M9_scored) / 9
```

### 2. 計算例

**シナリオ: M領域（マキャベリズム）の計算**

入力値（ユーザー回答）:
```
M1_raw = 2  (操作性1, 逆転項目)
M2_raw = 1  (操作性2, 逆転項目)
M3_raw = 5  (操作性3, 通常項目)
M4_raw = 4  (戦略1, 通常項目)
... (以降省略)
```

スコアリング後:
```
M1_scored = 6 - 2 = 4  (逆転項目)
M2_scored = 6 - 1 = 5  (逆転項目)
M3_scored = 5           (通常項目)
M4_scored = 4           (通常項目)
... (以降省略)
```

スケール計算:
```
M_score = (4 + 5 + 5 + 4 + ...) / 9 = [平均スコア]
```

---

## VI. データの解釈と注意点

### スコアの解釈

- **範囲**: 1.0 - 5.0
- **平均**: 通常3.0（Likert中間値）
- **高スコア**: その特性が強い（傾向が高い）
- **低スコア**: その特性が弱い（傾向が低い）

### グローバルプロパティについて

**被験者情報（年齢、性別）は「グローバルプロパティ」として記録されます：**

```
jsPsych.data.addProperties({
  subject_demographics_age: 35,
  subject_demographics_gender: "男性"
});
```

このため、CSVの各行（すべての試行）に同じ年齢と性別が表示されます。これは**正常な動作**です。

**分析時のポイント:**
- 年齢・性別データの取得は、どの行からでも（通常は trial_index=1 の行から）取得可能
- 重複排除は分析時に行う

例（Pandas）:
```python
import pandas as pd

df = pd.read_csv('result.csv')

# 最初の行から被験者情報を取得
subject_age = df.iloc[0]['subject_demographics_age']
subject_gender = df.iloc[0]['subject_demographics_gender']

# Likert回答のみ抽出
likert_data = df[df['trial_type'] == 'survey-likert']
```

### 欠損値

- 列が空の場合は、その試験段階では該当項目が表示されなかったことを示します
- 例: page_number=1の行では、page_items外の質問列は空になります

---

## VII. 実際のデータ例

```
trial_index=0, trial_type=html-button-response (イントロ):
  subject_demographics_age: (空)
  subject_demographics_gender: (空)
  page_number: (空)

trial_index=1, trial_type=survey (デモグラフィック):
  subject_demographics_age: 35
  subject_demographics_gender: "男性"
  M1_raw, N1_raw, P1_raw: (空)

trial_index=2, trial_type=survey-likert (ページ1):
  page_number: 1
  page_items: "9,17,21,15,7,22,1,6,5"
  M1_raw=1, M1_scored=5, M1_item_number=9
  N2_raw=1, N2_scored=5, N2_item_number=17
  ... (以下省略)
  subject_demographics_age: 35 (グローバルプロパティ)
  subject_demographics_gender: "男性" (グローバルプロパティ)

trial_index=3, trial_type=survey-likert (ページ2):
  page_number: 2
  ... (同様に続く)
```

---

## VIII. データの信頼性チェック

データ分析時に確認すべき項目：

- [ ] 被験者情報（年齢、性別）が正しく記録されているか
- [ ] 回答時間（rt）が妥当な範囲か（通常3-10秒/ページ）
- [ ] 全27問の回答が揃っているか（trial_index 2-4で各9問）
- [ ] `*_raw`値が1-5の範囲内か
- [ ] 逆転項目（M1, M2, N4, N5, P4, P8）で逆転スコアが正しく計算されているか
- [ ] スケールスコア（M_score, N_score, P_score）が1.0-5.0の範囲内か
- [ ] グローバルプロパティ（年齢・性別）がすべての行で一貫しているか

---

## IX. 補足資料

### 参考文献

下司忠大・小塩真司. (2017). 日本語版Short Dark Triad（SD3-J）の作成. パーソナリティ研究, 26(1), 12–22.  
https://doi.org/10.2132/personality.26.1.2

### 関連ファイル

- `sd3j.html`: 調査実施ページ（スコアリング処理含む）
- `CSV_DATA_DICTIONARY.md`: 本ファイル
- `IMPLEMENTATION_STATUS.md`: 実装ステータスドキュメント

---

**最終更新**: 2025年10月28日  
**バージョン**: 1.0  
**作成者**: AI Assistant  
**ステータス**: ✅ 正常動作確認済み
